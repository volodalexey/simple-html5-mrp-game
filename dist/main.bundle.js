(()=>{"use strict";var t,e={7279:(t,e,i)=>{i.r(e)},1950:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CollisionBlock=void 0;const n=i(8687),s=i(5473);class o extends n.Graphics{constructor({initX:t,initY:e,cell:i}){super(),this.beginFill(16711680),this.drawRect(0,0,i,i),this.endFill(),this.alpha=s.logCollisionBlock.enabled?.5:0,this.position.set(t,e)}getRectBounds(){return{top:this.y,right:this.x+this.width,bottom:this.y+this.height,left:this.x}}}e.CollisionBlock=o},3571:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Door=void 0;const n=i(8687);class s extends n.AnimatedSprite{constructor(){super(s.texturesCache)}setPosition({x:t,y:e}){null!=t&&(this.position.x=t),null!=e&&(this.position.y=e)}getRectBounds(){return{top:this.y,right:this.x+this.width,bottom:this.y+this.height,left:this.x}}}e.Door=s},9221:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Game=void 0;const n=i(8687),s=i(8865),o=i(4778),r=i(8554),a=i(6879),l=i(1664),h=i(4181),d=i(1950),c=i(5502),p=i(3571),u=i(5473);class g extends n.Container{constructor(t){super(),this.gameEnded=!1,this.time=0,this.transitionToOverlay=!1,this.transitionToLevel=!1,this.currentLevel=g.options.startLevel,this.collisionBlocks=new n.Container,this.doors=new n.Container,this.overlay=new n.Graphics,this.startGame=()=>{this.startModal.visible=!1,this.gameEnded=!1,this.time=0,this.player.restart(),this.inputHandler.restart(),this.currentLevel=g.options.startLevel,this.cleanFromAll(),this.runLevel(),this.transitionToOverlay=!1,this.transitionToLevel=!1,this.overlay.alpha=0},p.Door.texturesCache=t.textures.doopOpenTextures,this.setup(t),this.addEventLesteners(),this.runLevel(),this.statusBar.position.set(this.width/2-this.statusBar.width,this.level.y),this.startModal.position.set(this.width/2-this.startModal.width/2,this.height/2-this.startModal.height/2),this.overlay.width=this.width,this.overlay.height=this.height,setTimeout((()=>{this.level.idleLoad().catch(console.error)}),2e3)}setup({viewWidth:t,viewHeight:e,textures:{kingTextures:i}}){const n=new s.Level;this.addChild(n),this.level=n,this.statusBar=new r.StatusBar,this.addChild(this.statusBar),this.addChild(this.collisionBlocks),this.addChild(this.doors),this.player=new o.Player({game:this,textures:i}),this.addChild(this.player),this.inputHandler=new l.InputHandler({eventTarget:this,relativeToTarget:this.player}),this.overlay.beginFill(0),this.overlay.drawRect(0,0,this.width,this.height),this.overlay.endFill(),this.overlay.alpha=0,this.addChild(this.overlay),this.startModal=new a.StartModal({viewWidth:t,viewHeight:e}),this.startModal.visible=!1,this.addChild(this.startModal)}addEventLesteners(){this.startModal.on("click",this.startGame)}cleanFromAll(){for(;null!=this.collisionBlocks.children[0];)this.collisionBlocks.children[0].removeFromParent();for(;null!=this.doors.children[0];)this.doors.children[0].removeFromParent()}endGame(){this.gameEnded=!0,this.player.stop(),this.startModal.visible=!0;const t=this.currentLevel>3;this.startModal.reasonText.text=t?"Win!!":"Time out!"}handleResize({viewWidth:t,viewHeight:e}){const i=t,n=e,s=this.level.width,o=this.level.height;let r=1;o>=s?(r=n/o,r*s>i&&(r=i/s),(0,u.logLayout)(`By height (sc=${r})`)):(r=i/s,(0,u.logLayout)(`By width (sc=${r})`),r*o>n&&(r=n/o));const a=Math.floor(s*r),l=Math.floor(o*r),h=i>a?(i-a)/2:0,d=n>l?(n-l)/2:0;(0,u.logLayout)(`aw=${i} (ow=${a}) x=${h} ah=${n} (oh=${l}) y=${d}`),this.overlay.visible=!1,this.statusBar.visible=!1,this.x=h,this.width=a,this.y=d,this.height=l,(0,u.logLayout)(`x=${h} y=${d} w=${this.width} h=${this.height}`),this.overlay.visible=!0,this.statusBar.visible=!0}handleUpdate(t){this.gameEnded?this.handleTransition(!1):(this.time+=t,this.statusBar.updateTime(this.time),this.time>g.options.maxTime&&this.endGame(),this.player.handleUpdate(t),this.handleTransition(!0))}handleTransition(t=!1){this.transitionToOverlay&&(this.overlay.alpha<.9?this.overlay.alpha+=.01:(this.overlay.alpha=1,t&&this.runLevel(!0))),this.transitionToLevel&&(this.overlay.alpha>.1?this.overlay.alpha-=.01:(this.overlay.alpha=0,this.transitionToOverlay=!1,this.transitionToLevel=!1))}completeTransition(){this.transitionToOverlay&&(this.transitionToOverlay=!1,this.transitionToLevel=!0)}runLevel(t){if(!0===t&&this.currentLevel++,this.currentLevel>3)return this.endGame(),void this.completeTransition();this.cleanFromAll();const{collisionPoints:e,playerPosition:i,doorPosition:n}=this.level.initLevel(this.currentLevel);e.forEach((t=>{this.collisionBlocks.addChild(new d.CollisionBlock({initX:t.x,initY:t.y,cell:c.MapSettings.options.cell}))})),this.player.setPosition(i),this.player.setState(h.EPlayerState.idleRight);const s=new p.Door;s.setPosition(n),this.doors.addChild(s),this.statusBar.updateLevel(this.currentLevel),this.completeTransition()}}g.options={startLevel:1,maxTime:25e3},e.Game=g},1664:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.InputHandler=void 0;const n=i(5473);e.InputHandler=class{constructor({eventTarget:t,relativeToTarget:e,interactiveChildren:i=!1}){this.pointerXDown=null,this.pointerYDown=null,this.handlePointerDown=t=>{this.handlePlayerMove(!0,t)},this.handlePointerMove=t=>{this.handlePlayerMove(void 0,t)},this.handlePointerUp=t=>{this.handlePlayerMove(!1,t)},this.handleKeyDown=t=>{switch((0,n.logKeydown)(`${t.code} ${t.key}`),t.code){case"KeyW":case"ArrowUp":this.applyUpDirection(!0);break;case"KeyA":case"ArrowLeft":this.applyLeftDirection(!0);break;case"KeyD":case"ArrowRight":this.applyRightDirection(!0);break;case"KeyS":case"ArrowDown":this.applyDownDirection(!0)}},this.handleKeyUp=t=>{switch((0,n.logKeyup)(`${t.code} ${t.key}`),t.code){case"KeyW":case"ArrowUp":this.applyUpDirection(!1);break;case"KeyA":case"ArrowLeft":this.applyLeftDirection(!1);break;case"KeyD":case"ArrowRight":this.applyRightDirection(!1);break;case"KeyS":case"ArrowDown":this.applyDownDirection(!1)}},this.eventTarget=t,this.relativeToTarget=e,this.interactiveChildren=i,this.addEventLesteners()}addEventLesteners(){this.eventTarget.interactive=!0,this.eventTarget.on("pointerdown",this.handlePointerDown),this.eventTarget.on("pointermove",this.handlePointerMove),this.eventTarget.on("pointerup",this.handlePointerUp),window.addEventListener("keydown",this.handleKeyDown),window.addEventListener("keyup",this.handleKeyUp)}handlePlayerMove(t,e){const i=this.eventTarget.toLocal(e.global);(0,n.logPointerEvent)(`${e.type} px=${i.x} py=${i.y}`),this.applyPointerToDirection(t,i.x,i.y)}applyUpDirection(t){this.pointerYDown=t?-1:null,(0,n.logInputDirection)(`UP px=${this.pointerXDown} py=${this.pointerYDown}`)}applyDownDirection(t){this.pointerYDown=t?1:null,(0,n.logInputDirection)(`DOWN px=${this.pointerXDown} py=${this.pointerYDown}`)}applyLeftDirection(t){this.pointerXDown=t?-1:-1===this.pointerXDown?null:this.pointerXDown,(0,n.logInputDirection)(`LEFT px=${this.pointerXDown} py=${this.pointerYDown}`)}applyRightDirection(t){this.pointerXDown=t?1:1===this.pointerXDown?null:this.pointerXDown,(0,n.logInputDirection)(`RIGHT px=${this.pointerXDown} py=${this.pointerYDown}`)}isPointerDown(){return null!==this.pointerXDown||null!==this.pointerYDown}hasDirectionLeft(){return null!==this.pointerXDown&&this.pointerXDown<0}hasDirectionRight(){return null!==this.pointerXDown&&this.pointerXDown>0}hasDirectionUp(){return null!==this.pointerYDown&&this.pointerYDown<0}hasDirectionDown(){return null!==this.pointerYDown&&this.pointerYDown>0}applyPointerToDirection(t,e,i){const{relativeToTarget:s}=this;if(!0===t||void 0===t&&this.isPointerDown()){if(null!=s){const t={left:s.x,right:s.x+s.width,top:s.y,bottom:s.y+s.height};e>=t.right?this.pointerXDown=1:e<=t.left&&(this.pointerXDown=-1),i<=t.top?this.pointerYDown=-1:i>=t.bottom&&(this.pointerYDown=1),t.left<e&&e<t.right&&t.top<i&&i<t.bottom&&(this.pointerYDown=-1)}else this.pointerXDown=e,this.pointerYDown=i;(0,n.logInputDirection)(`MOVE|START px=${this.pointerXDown} py=${this.pointerYDown} rt=${Boolean(s)}`)}else!1===t&&(this.pointerXDown=null,this.pointerYDown=null,(0,n.logInputDirection)(`END px=${this.pointerXDown} py=${this.pointerYDown}`))}restart(){this.pointerXDown=null,this.pointerYDown=null}}},8865:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Level=void 0;const n=i(8687),s=i(1557),o=i(5502);class r extends n.Sprite{async idleLoad(){await n.Assets.loadBundle(s.manifest.bundles.map((t=>t.name)).filter(((t,e)=>e>0)))}initLevel(t){const e=n.Assets.get(`level${t}Background`),i=n.Assets.get(`level${t}Settings`);this.texture=e;const s=o.MapSettings.mapTileToPositions({mapSettings:i,layerName:"Collisions",tileIds:[292,250]}),r=o.MapSettings.findObjectGroupLayer({name:"Player and Door",mapSettings:i}),a=r.objects.find((t=>[250,292].includes(t.gid)));if(null==a)throw new Error("Unable to find initial player position");const l=r.objects.find((t=>[290,248].includes(t.gid)));if(null==l)throw new Error("Unable to find initial door position");return{collisionPoints:s,playerPosition:{x:a.x,y:a.y-a.height},doorPosition:{x:l.x,y:l.y-l.height}}}}e.Level=r},1557:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.LoaderScene=e.manifest=void 0;const n=i(8687),s=i(5473);e.manifest={bundles:[{name:"initial-bundle",assets:{spritesheet:"assets/spritesheets/spritesheet.json",level1Background:"assets/levels/Level-1.png",level1Settings:"assets/levels/Level-1-settings.json"}},{name:"level-2-bundle",assets:{level2Background:"assets/levels/Level-2.png",level2Settings:"assets/levels/Level-2-settings.json"}},{name:"level-3-bundle",assets:{level3Background:"assets/levels/Level-3.png",level3Settings:"assets/levels/Level-3-settings.json"}}]};class o extends n.Container{constructor(t){super(),this.downloadProgress=t=>{this.loaderBarFill.width=(o.barOptions.width-2*o.barOptions.borderThick)*t},this.setup(),this.draw()}setup(){const t=new n.Graphics;this.addChild(t),this.loaderBarBorder=t;const e=new n.Graphics;this.addChild(e),this.loaderBarFill=e}draw(){const{barOptions:t}=o,{loaderBarFill:e,loaderBarBorder:i}=this;i.beginFill(t.borderColor),i.drawRoundedRect(0,0,t.width,t.height,t.borderRadius),i.endFill(),e.beginFill(t.fillColor),e.drawRoundedRect(t.borderThick,t.borderThick,t.width-2*t.borderThick,t.height-2*t.borderThick,t.borderRadius),e.endFill()}async initializeLoader(){await n.Assets.init({manifest:e.manifest}),console.log("manifest.bundles[0].name",e.manifest.bundles[0].name),await n.Assets.loadBundle(e.manifest.bundles[0].name,this.downloadProgress)}getAssets(){return{spritesheet:n.Assets.get("spritesheet")}}handleResize({viewWidth:t,viewHeight:e}){const i=t,n=e,r=this.width,a=this.height;if(i>=r&&n>=a){const t=i>r?(i-r)/2:0,e=n>a?(n-a)/2:0;(0,s.logLayout)(`Spacing aw=${i} tw=${r} ah=${n} th=${a}`),this.x=t,this.width=o.barOptions.width,this.y=e,this.height=o.barOptions.height}else{let t=1;a>=r?(t=n/a,t*r>i&&(t=i/r),(0,s.logLayout)(`By height (sc=${t})`)):(t=i/r,(0,s.logLayout)(`By width (sc=${t})`),t*a>n&&(t=n/a));const e=Math.floor(r*t),o=Math.floor(a*t),l=i>e?(i-e)/2:0,h=n>o?(n-o)/2:0;(0,s.logLayout)(`aw=${i} (ow=${e}) ah=${n} (oh=${o})`),this.x=l,this.width=e,this.y=h,this.height=o}(0,s.logLayout)(`x=${this.x} y=${this.y} w=${this.width} h=${this.height}`)}handleMounted(){}handleUpdate(){}}o.barOptions={width:350,height:40,fillColor:1588688,borderRadius:5,borderThick:5,borderColor:0},e.LoaderScene=o},6168:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MainScene=void 0;const n=i(8687),s=i(9221);class o extends n.Container{constructor(t){super(),this.gravity=.7,this.gameEnded=!1,this.setup(t)}setup({viewWidth:t,viewHeight:e,textures:i}){const n=new s.Game({viewWidth:t,viewHeight:e,textures:i});this.addChild(n),this.game=n}handleResize(t){this.game.handleResize(t)}handleUpdate(t){this.game.handleUpdate(t)}}e.MainScene=o},5502:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MapSettings=void 0;class i{static findTileLayer({name:t,mapSettings:e}){const i=e.layers.find((e=>"tilelayer"===e.type&&e.name===t));if(null==i)throw new Error(`Unable to detect "${t}" tile layer`);return i}static findObjectGroupLayer({name:t,mapSettings:e}){const i=e.layers.find((e=>"objectgroup"===e.type&&e.name===t));if(null==i)throw new Error(`Unable to detect "${t}" object group layer`);return i}static mapTileToPositions({mapSettings:t,layerName:e,tileIds:n}){const s=[],{tilesPerRow:o,cell:r}=i.options,a=i.findTileLayer({name:e,mapSettings:t});for(let t=0;t<a.data.length;t+=o)a.data.slice(t,t+o).forEach(((e,i)=>{n.includes(e)&&s.push({x:i*r,y:t/o*r})}));return s}}i.options={tilesPerRow:16,cell:64},e.MapSettings=i},4778:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Player=e.PlayerAnimation=void 0;const n=i(8687),s=i(4181),o=i(5473);var r;!function(t){t.idleLeft="idleLeft",t.idleRight="idleRight",t.runLeft="runLeft",t.runRight="runRight",t.enterDoorLeft="enterDoorLeft",t.enterDoorRight="enterDoorRight"}(r=e.PlayerAnimation||(e.PlayerAnimation={}));class a extends n.Container{constructor(t){if(super(),this.velocity={vx:0,vy:0},this.hitbox={position:{x:0,y:0},offset:{x:4,y:4},width:50,height:53},this.frameTimer=0,this.game=t.game,this.setup(t),this.updateHitbox(),o.logPlayerBounds.enabled){const t=new n.Graphics;t.beginFill(16711935),t.drawRect(0,0,this.width,this.height),t.endFill(),t.alpha=.5,this.addChild(t);const e=new n.Graphics;e.beginFill(65535),e.drawRect(this.hitbox.position.x,this.hitbox.position.y,this.hitbox.width,this.hitbox.height),e.endFill(),e.alpha=.5,this.addChild(e)}this.states={[s.EPlayerState.idleLeft]:new s.IdleLeft({game:t.game}),[s.EPlayerState.idleRight]:new s.IdleRight({game:t.game}),[s.EPlayerState.runLeft]:new s.RunLeft({game:t.game}),[s.EPlayerState.runRight]:new s.RunRight({game:t.game}),[s.EPlayerState.jumpLeft]:new s.JumpLeft({game:t.game}),[s.EPlayerState.jumpRight]:new s.JumpRight({game:t.game}),[s.EPlayerState.fallLeft]:new s.FallLeft({game:t.game}),[s.EPlayerState.fallRight]:new s.FallRight({game:t.game}),[s.EPlayerState.enterDoorLeft]:new s.EnterDoorLeft({game:t.game}),[s.EPlayerState.enterDoorRight]:new s.EnterDoorRight({game:t.game})}}setup({textures:{idleLeftTextures:t,idleRightTextures:e,runLeftTextures:i,runRightTextures:s,enterDoorLeftTextures:o,enterDoorRightTextures:r}}){const a=new n.Graphics;this.addChild(a),this.playerBox=a;const l=new n.Container;this.addChild(l),this.spritesContainer=l;const h=new n.AnimatedSprite(t);l.addChild(h),this.idleLeftAnimation=h;const d=new n.AnimatedSprite(e);l.addChild(d),this.idleRightAnimation=d;const c=new n.AnimatedSprite(i);l.addChild(c),this.runLeftAnimation=c;const p=new n.AnimatedSprite(s);l.addChild(p),this.runRightAnimation=p;const u=new n.AnimatedSprite(o);u.loop=!1,l.addChild(u),this.enterDoorLeftAnimation=u;const g=new n.AnimatedSprite(r);g.loop=!1,l.addChild(g),this.enterDoorRightAnimation=g}hideAllAnimations(){this.spritesContainer.children.forEach((t=>{t.visible=!1}))}switchAnimation(t){switch(this.hideAllAnimations(),t){case r.idleLeft:this.currentAnimation=this.idleLeftAnimation;break;case r.idleRight:this.currentAnimation=this.idleRightAnimation;break;case r.runLeft:this.currentAnimation=this.runLeftAnimation;break;case r.runRight:this.currentAnimation=this.runRightAnimation;break;case r.enterDoorLeft:this.currentAnimation=this.enterDoorLeftAnimation;break;case r.enterDoorRight:this.currentAnimation=this.enterDoorRightAnimation}this.currentAnimation.currentFrame=0,this.currentAnimation.visible=!0}setState(t){this.currentState=this.states[t],this.currentState.enter(),(0,o.logPlayerState)(`state=${t}`)}jump(){this.velocity.vy=-a.options.jumpSpeed}isOnGround(){return Boolean(this.groundBlock)}isFalling(){return this.velocity.vy>a.options.gravity}stop(){this.velocity.vx=0,this.velocity.vy=0}isEnteringDoorState(){return[this.states[s.EPlayerState.enterDoorLeft],this.states[s.EPlayerState.enterDoorRight]].includes(this.currentState)}handleUpdate(t){const{inputHandler:e}=this.game,i=this.isEnteringDoorState();i||(this.currentState.handleInput(),e.hasDirectionLeft()?this.velocity.vx=-a.options.moveSpeed:e.hasDirectionRight()?this.velocity.vx=a.options.moveSpeed:this.velocity.vx=0,this.x+=this.velocity.vx),this.checkForHorizontalCollisions(),this.applyGravity(),this.checkForVerticalCollisions(),this.frameTimer>a.options.frameInterval?(this.frameTimer=0,this.currentAnimation.currentFrame<this.currentAnimation.totalFrames-1?this.currentAnimation.currentFrame++:this.currentAnimation.loop&&(this.currentAnimation.currentFrame=0),i&&this.currentAnimation.currentFrame>=0&&!this.game.transitionToOverlay&&(this.game.transitionToOverlay=!0)):this.frameTimer+=t}restart(){this.velocity.vx=0,this.velocity.vy=0,this.setState(s.EPlayerState.idleRight)}checkForHorizontalCollisions(){this.updateHitbox();const t=this.getHitboxBounds();for(let e=0;e<this.game.collisionBlocks.children.length;e++){const i=this.game.collisionBlocks.children[e].getRectBounds();if(t.left<=i.right&&t.right>=i.left&&t.bottom>=i.top&&t.top<=i.bottom){if(this.velocity.vx<0){this.setPosition({x:i.right+1});break}if(this.velocity.vx>0){this.setPosition({x:i.left-this.hitbox.width-1});break}}}}checkForVerticalCollisions(){this.updateHitbox();const t=this.getHitboxBounds();this.groundBlock=void 0;for(let e=0;e<this.game.collisionBlocks.children.length;e++){const i=this.game.collisionBlocks.children[e],n=i.getRectBounds();if(t.left<=n.right&&t.right>=n.left&&t.bottom>=n.top&&t.top<=n.bottom){if(this.velocity.vy<0){this.velocity.vy=0,this.setPosition({y:n.bottom+1});break}if(this.velocity.vy>0){this.velocity.vy=0,this.groundBlock=i,this.setPosition({y:n.top-this.hitbox.height-1});break}}}}applyGravity(){this.velocity.vy+=a.options.gravity,this.position.y+=this.velocity.vy}updateHitbox(){const{position:t,offset:e,width:i,height:n}=this.hitbox;t.x=this.position.x+(this.width-i)/2+e.x,t.y=this.position.y+(this.height-n)/2+e.y}setPosition({x:t,y:e}){this.updateHitbox(),null!=t&&(this.position.x=t+(this.position.x-this.hitbox.position.x)),null!=e&&(this.position.y=e+(this.position.y-this.hitbox.position.y))}getHitboxBounds(){return{top:this.hitbox.position.y,right:this.hitbox.position.x+this.hitbox.width,bottom:this.hitbox.position.y+this.hitbox.height,left:this.hitbox.position.x}}checkDoorsCollision(){this.updateHitbox();const t=this.getHitboxBounds();return this.game.doors.children.some((e=>{const i=e.getRectBounds();return t.right<=i.right&&t.left>=i.left&&t.bottom>=i.top&&t.top<=i.bottom&&(this.currentState===this.states[s.EPlayerState.idleLeft]?this.setState(s.EPlayerState.enterDoorLeft):this.setState(s.EPlayerState.enterDoorRight),!0)}))}}a.fps=20,a.options={moveSpeed:5,jumpSpeed:25,gravity:1,frameInterval:1e3/a.fps},e.Player=a},3110:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SceneManager=void 0;const n=i(8687),s=i(5473);class o extends n.Container{init(){}handleUpdate(){}handleResize(){}}class r{constructor(){}static get width(){return window.innerWidth}static get height(){return window.innerHeight}static async initialize(){var t;const e=new n.Application({autoDensity:!0,resolution:null!==(t=window.devicePixelRatio)&&void 0!==t?t:1,width:r.width,height:r.height,resizeTo:window});document.body.appendChild(e.view),s.logApp.enabled&&((0,s.logApp)("window.app initialized!"),window.app=e),r.app=e,r.setupEventLesteners()}static setupEventLesteners(){window.addEventListener("resize",r.resizeDeBounce),r.app.ticker.add(r.updateHandler)}static async changeScene(t){r.app.stage.removeChild(r.currentScene),r.currentScene.destroy(),r.currentScene=t,r.app.stage.addChild(r.currentScene),r.resizeHandler()}static resizeDeBounce(){r.cancelScheduledResizeHandler(),r.scheduleResizeHandler()}static cancelScheduledResizeHandler(){clearTimeout(r.resizeTimeoutId)}static scheduleResizeHandler(){r.resizeTimeoutId=setTimeout((()=>{r.cancelScheduledResizeHandler(),r.resizeHandler()}),r.resizeTimeout)}static resizeHandler(){r.currentScene.handleResize({viewWidth:r.width,viewHeight:r.height})}static updateHandler(){r.currentScene.handleUpdate(r.app.ticker.deltaMS)}}r.currentScene=new o,r.resizeTimeout=300,e.SceneManager=r},6879:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.StartModal=void 0;const n=i(8687);class s extends n.Container{constructor(t){super(),this.boxOptions={fill:16777215,width:300,height:200,borderRadius:5},this.reasonTextOptions={top:-50,textColor:0,textSize:40,fontWeight:"bold"},this.buttonOptions={top:120,left:50,width:200,height:50,fill:959977,borderRadius:10},this.buttonTextOptions={top:95,textColor:16777215,textSize:20},this.setup(t),this.draw(t),this.setupEventListeners()}setup(t){this.modalBox=new n.Graphics,this.addChild(this.modalBox);const{boxOptions:e,reasonTextOptions:i,buttonTextOptions:s}=this;this.reasonText=new n.Text("-",{fontSize:i.textSize,fill:i.textColor,fontWeight:i.fontWeight}),this.reasonText.anchor.set(.5,.5),this.reasonText.position.set(e.width/2,e.height/2+i.top),this.addChild(this.reasonText),this.button=new n.Graphics,this.button.interactive=!0,this.button.cursor="pointer",this.addChild(this.button),this.buttonText=new n.Text("Start Game",{fontSize:s.textSize,fill:s.textColor}),this.buttonText.anchor.set(.5,.5),this.buttonText.position.set(e.width/2,e.height/2/2+s.top),this.button.addChild(this.buttonText)}draw(t){const{boxOptions:e,buttonOptions:i}=this;this.modalBox.beginFill(e.fill),this.modalBox.drawRoundedRect(0,0,e.width,e.height,e.borderRadius),this.modalBox.endFill(),this.button.beginFill(i.fill),this.button.drawRoundedRect(i.left,i.top,i.width,i.height,i.borderRadius),this.button.endFill()}setupEventListeners(){this.button.on("pointertap",(t=>{this.emit("click",t)}))}}e.StartModal=s},8554:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.StatusBar=void 0;const n=i(8687);class s extends n.Container{constructor(){super(),this.setup()}static getLevelText(t){return`Level: ${t}`}static getTimeText(t){return`Time: ${t}`}setup(){const{options:{padding:t,textSize:e,textColor:i,textShadowOffset:o,textColorShadow:r}}=s,a=new n.Text(s.getLevelText("-"),{fontSize:e,fill:r});a.position.set(t,t),this.addChild(a),this.levelTextShadow=a;const l=new n.Text(s.getLevelText("-"),{fontSize:e,fill:i});l.position.set(t+o,t+o),this.addChild(l),this.levelText=l;const h=new n.Text(s.getTimeText(0),{fontSize:.8*e,fill:r});h.position.set(a.x,a.y+a.height),h.alpha=1,this.addChild(h),this.timeTextShadow=h;const d=new n.Text(s.getTimeText(0),{fontSize:.8*e,fill:i});d.position.set(l.x,l.y+l.height),this.addChild(d),this.timeText=d}updateLevel(t){this.levelText.text=s.getLevelText(t),this.levelTextShadow.text=s.getLevelText(t)}updateTime(t){const e=(.001*t).toFixed(1);this.timeText.text=s.getTimeText(e),this.timeTextShadow.text=s.getTimeText(e)}}s.options={padding:20,textColor:12277847,textColorShadow:10013656,textShadowOffset:.5,textSize:20},e.StatusBar=s},6752:(t,e,i)=>{i(7279);const n=i(3110),s=i(6168),o=i(1557);(async function(){const t=document.querySelector(".ellipsis");null!=t&&(t.style.display="none"),await n.SceneManager.initialize();const e=new o.LoaderScene({viewWidth:n.SceneManager.width,viewHeight:n.SceneManager.height});await n.SceneManager.changeScene(e),await e.initializeLoader();const{spritesheet:{animations:i,textures:r}}=e.getAssets();await n.SceneManager.changeScene(new s.MainScene({app:n.SceneManager.app,viewWidth:n.SceneManager.width,viewHeight:n.SceneManager.height,textures:{doopOpenTextures:i["Door-Open"],kingTextures:{enterDoorLeftTextures:i["King-Enter-Door-Left"],enterDoorRightTextures:i["King-Enter-Door-Right"],idleLeftTextures:i["King-Idle-Left"],idleRightTextures:i["King-Idle-Right"],runLeftTextures:i["King-Run-Left"],runRightTextures:i["King-Run-Right"]},boxTexture:r["Box.png"]}}))})().catch((t=>{var e;console.error(t);const i=document.querySelector(".error-message");null!=i&&(i.classList.remove("hidden"),i.innerText=Boolean(t)&&Boolean(t.message)?t.message:t);const n=document.querySelector(".error-stack");null!=n&&(n.classList.remove("hidden"),n.innerText=Boolean(t)&&Boolean(t.stack)?t.stack:"");const s=document.querySelector("canvas");null!=s&&(null===(e=s.parentElement)||void 0===e||e.removeChild(s))}))},5473:function(t,e,i){var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.logCollisionBlock=e.logPlayerState=e.logPlayerBounds=e.logInputDirection=e.logKeyup=e.logKeydown=e.logPointerEvent=e.logLayout=e.logApp=void 0;const s=n(i(1227));e.logApp=(0,s.default)("mrp-app"),e.logLayout=(0,s.default)("mrp-layout"),e.logPointerEvent=(0,s.default)("mrp-pointer-event"),e.logKeydown=(0,s.default)("mrp-keydown"),e.logKeyup=(0,s.default)("mrp-keyup"),e.logInputDirection=(0,s.default)("mrp-input-direction"),e.logPlayerBounds=(0,s.default)("mrp-player-bounds"),e.logPlayerState=(0,s.default)("mrp-player-state"),e.logCollisionBlock=(0,s.default)("mrp-collision-block")},4181:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.EnterDoorRight=e.EnterDoorLeft=e.FallRight=e.FallLeft=e.JumpRight=e.JumpLeft=e.RunRight=e.RunLeft=e.IdleRight=e.IdleLeft=e.PlayerState=e.EPlayerState=void 0;const n=i(4778);var s;!function(t){t.idleLeft="idleLeft",t.idleRight="idleRight",t.runLeft="runLeft",t.runRight="runRight",t.jumpLeft="jumpLeft",t.jumpRight="jumpRight",t.fallLeft="fallLeft",t.fallRight="fallRight",t.enterDoorLeft="enterDoorLeft",t.enterDoorRight="enterDoorRight"}(s=e.EPlayerState||(e.EPlayerState={}));class o{constructor({game:t,state:e}){this.state=e,this.game=t}enter(){throw new Error("enter() not implemented in child class")}handleInput(){throw new Error("handleInput() not implemented in child class")}}e.PlayerState=o,e.IdleLeft=class extends o{constructor({game:t}){super({game:t,state:s.idleLeft})}enter(){const{player:t}=this.game;t.switchAnimation(n.PlayerAnimation.idleLeft)}handleInput(){const{inputHandler:t,player:e}=this.game;t.hasDirectionUp()?e.checkDoorsCollision()?e.setState(s.enterDoorLeft):t.hasDirectionRight()?e.setState(s.jumpRight):e.setState(s.jumpLeft):t.hasDirectionLeft()?e.setState(s.runLeft):t.hasDirectionRight()&&e.setState(s.runRight)}},e.IdleRight=class extends o{constructor({game:t}){super({game:t,state:s.idleRight})}enter(){const{player:t}=this.game;t.switchAnimation(n.PlayerAnimation.idleRight)}handleInput(){const{inputHandler:t,player:e}=this.game;t.hasDirectionUp()?e.checkDoorsCollision()?e.setState(s.enterDoorRight):t.hasDirectionLeft()?e.setState(s.jumpLeft):e.setState(s.jumpRight):t.hasDirectionLeft()?e.setState(s.runLeft):t.hasDirectionRight()&&e.setState(s.runRight)}},e.RunLeft=class extends o{constructor({game:t}){super({game:t,state:s.runLeft})}enter(){const{player:t}=this.game;t.switchAnimation(n.PlayerAnimation.runLeft)}handleInput(){const{inputHandler:t,player:e}=this.game;t.hasDirectionUp()?t.hasDirectionRight()?e.setState(s.jumpRight):e.setState(s.jumpLeft):t.hasDirectionRight()?e.setState(s.runRight):t.hasDirectionLeft()||e.setState(s.idleLeft)}},e.RunRight=class extends o{constructor({game:t}){super({game:t,state:s.runRight})}enter(){const{player:t}=this.game;t.switchAnimation(n.PlayerAnimation.runRight)}handleInput(){const{inputHandler:t,player:e}=this.game;t.hasDirectionUp()?t.hasDirectionLeft()?e.setState(s.jumpLeft):e.setState(s.jumpRight):t.hasDirectionLeft()?e.setState(s.runLeft):t.hasDirectionRight()||e.setState(s.idleRight)}},e.JumpLeft=class extends o{constructor({game:t}){super({game:t,state:s.jumpLeft})}enter(){const{player:t}=this.game;t.isOnGround()&&t.jump(),t.switchAnimation(n.PlayerAnimation.runLeft)}handleInput(){const{player:t}=this.game;t.isFalling()&&t.setState(s.fallLeft)}},e.JumpRight=class extends o{constructor({game:t}){super({game:t,state:s.jumpRight})}enter(){const{player:t}=this.game;t.isOnGround()&&t.jump(),t.switchAnimation(n.PlayerAnimation.runRight)}handleInput(){const{player:t}=this.game;t.isFalling()&&t.setState(s.fallRight)}},e.FallLeft=class extends o{constructor({game:t}){super({game:t,state:s.fallLeft})}enter(){const{player:t}=this.game;t.switchAnimation(n.PlayerAnimation.runLeft)}handleInput(){const{player:t}=this.game;t.isOnGround()&&t.setState(s.runLeft)}},e.FallRight=class extends o{constructor({game:t}){super({game:t,state:s.fallRight})}enter(){const{player:t}=this.game;t.switchAnimation(n.PlayerAnimation.runRight)}handleInput(){const{player:t}=this.game;t.isOnGround()&&t.setState(s.runRight)}},e.EnterDoorLeft=class extends o{constructor({game:t}){super({game:t,state:s.enterDoorLeft})}enter(){const{player:t}=this.game;t.switchAnimation(n.PlayerAnimation.enterDoorLeft),t.velocity.vx=0,t.velocity.vy=0}handleInput(){}},e.EnterDoorRight=class extends o{constructor({game:t}){super({game:t,state:s.enterDoorRight})}enter(){const{player:t}=this.game;t.switchAnimation(n.PlayerAnimation.enterDoorRight),t.velocity.vx=0,t.velocity.vy=0}handleInput(){}}}},i={};function n(t){var s=i[t];if(void 0!==s)return s.exports;var o=i[t]={id:t,loaded:!1,exports:{}};return e[t].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.m=e,t=[],n.O=(e,i,s,o)=>{if(!i){var r=1/0;for(d=0;d<t.length;d++){for(var[i,s,o]=t[d],a=!0,l=0;l<i.length;l++)(!1&o||r>=o)&&Object.keys(n.O).every((t=>n.O[t](i[l])))?i.splice(l--,1):(a=!1,o<r&&(r=o));if(a){t.splice(d--,1);var h=s();void 0!==h&&(e=h)}}return e}o=o||0;for(var d=t.length;d>0&&t[d-1][2]>o;d--)t[d]=t[d-1];t[d]=[i,s,o]},n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),(()=>{var t={179:0};n.O.j=e=>0===t[e];var e=(e,i)=>{var s,o,[r,a,l]=i,h=0;if(r.some((e=>0!==t[e]))){for(s in a)n.o(a,s)&&(n.m[s]=a[s]);if(l)var d=l(n)}for(e&&e(i);h<r.length;h++)o=r[h],n.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return n.O(d)},i=self.webpackChunksimple_html5_mrp_game=self.webpackChunksimple_html5_mrp_game||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))})();var s=n.O(void 0,[736],(()=>n(6752)));s=n.O(s)})();